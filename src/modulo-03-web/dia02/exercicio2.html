<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Exercicio 2</title>
</head>
<body>
	<form method="POST" enctype="multipart/form-data">
		<h1>Aula</h1>

		<div>
			<label for="nome">Nome: </label>
			<input id="nome" type="text" name="nome" required pattern=".{6,}"/>
		</div>

		<div>
			<label for="sexo">Sexo: </label>
			<select id="sexo" required>
				<option value="">-- Escolha --</option>
				<option value="M">Masculino</option>
				<option value="F">Feminino</option>
			</select>
		</div>

		<div>
			<label for="flechas">Flechas: </label>
			<input id="flechas" type="number" name="flechas" value="42"/>
		</div>

		<div>
			<label for="nasc">Nascimento: </label>
			<input id="nasc" type="date" name="dataNasc" required/>
		</div>

		<div>
			<label for="status">Status: </label>
			<select id="status">
				<option>-- Escolha --</option>
				<option>Morto</option>
				<option>Vivo</option>
			</select>
		</div>

		<div>
			<h3>Itens:</h3>
		</div>

		<div>
			<label for="ArcFlc">Arco e Flecha: </label>
			<input id="ArcFlc" type="checkbox" name="ArcFlc" CHECKED/>
		</div>

		<div>
			<label for="EPA">Espada de aço Porto-alegrense: </label>
			<input id="EPA" type="checkbox" name="EPA"/>
		</div>

		<div>
			<label for="EA">Escudo de amburana: </label>
			<input id="EA" type="checkbox" name="EA" CHECKED/>
		</div>

		<div>
			<label for="PHP">Poção HP: </label>
			<input id="PHP" type="checkbox" name="PHP"/>
		</div>

		<div>
			<label for="img">Imagem: </label>
			<input id="img" type="file" name="img" accept=".jpeg, .jpg, .png" onChange="return validarExt()"/>
		</div>

		<div>
			<input id="cadastrar" type="submit" name="cadastrar" value="Cadastrar"/>
		</div>
	</form>

	<script>
		function validarExt() {
			//var inputFile = document.getElementsByName('avatar')[0];
			var inputFile = document.getElementById('img');
			var nomeArquivo = inputFile.value;
			var valida = false;
			var extensoesValidas = [ '.jpg', '.jpeg', '.png' ];
			for (var i = 0, len = extensoesValidas.length; i < len; i++) {
				var ext = extensoesValidas[i];
				var apenasAExtensao = nomeArquivo.substring(nomeArquivo.length-ext.length, 
					nomeArquivo.length).toLowerCase();

				if (apenasAExtensao === ext.toLowerCase()) {
					valida = true;
					inputFile.value = null;
					break;
				}
			}
			if (valida === false) {
				alert('Extensão inválida!');
				inputFile.value = null;
			}

			return valida;
		}
	</script>
	</body>
</html>